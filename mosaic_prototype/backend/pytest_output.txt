============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-8.2.1, pluggy-1.6.0 -- /home/jan/Dokumenty/code/mosaic/.venv/bin/python
cachedir: .pytest_cache
rootdir: /home/jan/Dokumenty/code/mosaic/mosaic_prototype/backend
configfile: pytest.ini
testpaths: tests
plugins: cov-5.0.0
collecting ... collected 56 items

tests/test_api.py::test_get_entries_empty PASSED                         [  1%]
tests/test_api.py::test_add_activity_and_toggle PASSED                   [  3%]
tests/test_api.py::test_add_activity_requires_category PASSED            [  5%]
tests/test_api.py::test_add_activity_requires_frequency PASSED           [  7%]
tests/test_api.py::test_add_entry_upsert PASSED                          [  8%]
tests/test_api.py::test_today_and_finalize_day PASSED                    [ 10%]
tests/test_api.py::test_add_entry_validation PASSED                      [ 12%]
tests/test_api.py::test_rate_limit_enforced PASSED                       [ 14%]
tests/test_api.py::test_login_rate_limit PASSED                          [ 16%]
tests/test_api.py::test_api_key_enforced PASSED                          [ 17%]
tests/test_api.py::test_import_csv_endpoint PASSED                       [ 19%]
tests/test_api.py::test_delete_entry_not_found_returns_standard_error PASSED [ 21%]
tests/test_api.py::test_auth_is_required_for_entries PASSED              [ 23%]
tests/test_api.py::test_csrf_is_required_for_mutations PASSED            [ 25%]
tests/test_api.py::test_update_activity_propagates PASSED                [ 26%]
tests/test_api.py::test_today_respects_deactivation_date PASSED          [ 28%]
tests/test_api.py::test_entry_metadata_survives_activity_deletion PASSED [ 30%]
tests/test_api.py::test_entries_filtering PASSED                         [ 32%]
tests/test_api.py::test_stats_progress_payload_structure PASSED          [ 33%]
tests/test_api.py::test_stats_progress_invalid_date PASSED               [ 35%]
tests/test_api.py::test_entries_pagination PASSED                        [ 37%]
tests/test_api.py::test_activities_pagination PASSED                     [ 39%]
tests/test_api.py::test_today_pagination PASSED                          [ 41%]
tests/test_api.py::test_invalid_pagination_returns_error PASSED          [ 42%]
tests/test_api.py::test_today_cache_invalidation PASSED                  [ 44%]
tests/test_api.py::test_stats_cache_invalidation PASSED                  [ 46%]
tests/test_auth.py::test_register_and_login_flow PASSED                  [ 48%]
tests/test_auth.py::test_login_invalid_credentials PASSED                [ 50%]
tests/test_auth.py::test_invalid_token_rejected PASSED                   [ 51%]
tests/test_auth.py::test_expired_token_rejected PASSED                   [ 53%]
tests/test_auth.py::test_cache_helpers PASSED                            [ 55%]
tests/test_backup_manager.py::test_backup_status_defaults PASSED         [ 57%]
tests/test_backup_manager.py::test_backup_run_creates_files PASSED       [ 58%]
tests/test_backup_manager.py::test_backup_toggle_persistence PASSED      [ 60%]
tests/test_backup_manager.py::test_backup_download_endpoint PASSED       [ 62%]
tests/test_export.py::test_export_requires_authentication PASSED         [ 64%]
tests/test_export.py::test_export_json_includes_entries_and_activities PASSED [ 66%]
tests/test_export.py::test_export_pagination_offset PASSED               [ 67%]
tests/test_export.py::test_export_csv_format PASSED                      [ 69%]
tests/test_import_validation.py::test_import_csv_skips_duplicate_rows PASSED [ 71%]
tests/test_import_validation.py::test_import_csv_flags_missing_required_fields PASSED [ 73%]
tests/test_import_validation.py::test_import_csv_updates_existing_and_creates_new PASSED [ 75%]
tests/test_stream_proxy.py::test_stream_proxy_authorized_ok PASSED       [ 76%]
tests/test_stream_proxy.py::test_stream_proxy_unauthorized PASSED        [ 78%]
tests/test_stream_proxy.py::test_stream_proxy_rate_limit PASSED          [ 80%]
tests/test_stream_proxy.py::test_stream_proxy_disconnect PASSED          [ 82%]
tests/test_transactions.py::test_import_csv_rolls_back_on_failure PASSED [ 83%]
tests/test_validation.py::test_validate_entry_payload_success PASSED     [ 85%]
tests/test_validation.py::test_validate_entry_payload_missing_fields PASSED [ 87%]
tests/test_validation.py::test_validate_activity_create_payload_invalid_frequency PASSED [ 89%]
tests/test_validation.py::test_validate_activity_update_payload_requires_pairs PASSED [ 91%]
tests/test_validation.py::test_validate_activity_update_payload_overrides_goal_with_frequency PASSED [ 92%]
tests/test_validation.py::test_validate_csv_import_payload_success PASSED [ 94%]
tests/test_validation.py::test_validate_csv_import_payload_missing PASSED [ 96%]
tests/test_validation.py::test_validate_finalize_day_payload_defaults_today PASSED [ 98%]
tests/test_validation.py::test_validate_finalize_day_payload_invalid_date PASSED [100%]

============================= 56 passed in 14.63s ==============================
